<template>
  <div>
    <legacy-track
      propKey="quests"
      :title="$t('IRONSWORN.LEGACY.QUESTS.Label')"
    />
    <legacy-track propKey="bonds" :title="$t('IRONSWORN.LEGACY.BONDS.Label')" />
    <legacy-track
      propKey="discoveries"
      :title="$t('IRONSWORN.LEGACY.DISCOVERIES.Label')"
    />

    <hr class="nogrow" v-if="starredProgresses.length > 0" />
    <progress-box
      v-for="item in starredProgresses"
      :key="item._id"
      :item="item"
    />
  </div>
</template>

<script lang="ts" setup>
import { computed, inject, Ref } from 'vue'
import legacyTrack from '../legacy-track.vue'
import progressBox from '../progress/progress-box.vue'

const actor = inject('actor') as Ref

const starredProgresses = computed(() => {
  return actor.value.items
    .filter((x) => x.type === 'progress')
    .filter((x) => x.data.starred)
})
</script>
