// styles for TinyMCE and ProseMirror editors

// Editors: shared styles
.editor {
  min-height: 100px;
}
.editor {
  border: var(--ironsworn-border-width-md) solid
    var(--ironsworn-color-input-border);
  background: var(--ironsworn-color-input-bg);
  caret-color: var(--ironsworn-color-fg-highlight);
}
.tab .editor {
  border-top-width: 0;
  border-radius: 0 0 var(--ironsworn-border-radius-lg)
    var(--ironsworn-border-radius-lg);
}
.editor-edit {
  .clickableBlockMixin();
  background: var(--ironsworn-color-bg);
  border-radius: var(--ironsworn-border-radius-md);
}

// Editor custom select elements
.prosemirror button,
.tox .tox-tbtn--bespoke {
  .clickableBlockMixin();
  border-radius: var(--ironsworn-border-radius-md);
}

// Editors: ProseMirror

.ProseMirror {
  .inputFieldMixin();
  padding: 0.5rem;
}

// Editors: TinyMCE
.tox-tinymce {
  border: 0;
  border-radius: 0;
}
.tox {
  font-family: var(--font-primary);
  :not(svg):not(rect) {
    color: currentColor;
  }
  &:not(.tox-tinymce-inline) .tox-editor-header {
    border-bottom: var(--ironsworn-border-width-md) solid
      var(--ironsworn-color-border-muted);
    justify-content: center;
  }
  .tox-toolbar__primary {
    justify-content: center;
    & > .tox-toolbar__group {
      padding: 0 var(--ironsworn-spacer-md);
    }
  }

  .tox-tbtn .tox-toolbar-overlord,
  .tox-toolbar__primary,
  &:not(.tox-tinymce-inline) .tox-editor-header {
    color: var(--ironsworn-color-fg);
    background: var(--ironsworn-color-bg);
  }
  .tox-tbtn {
    color: var(--ironsworn-color-clickable-block-fg);
    border-color: transparent;
    background: var(--ironsworn-color-clickable-block-bg);
    border-style: solid;
    border-width: var(--ironsworn-border-width-md);
    transition: var(--std-animation);
    // margin: 6px 1px var(--ironsworn-spacer-md) 0;
    &:focus {
      color: var(--ironsworn-color-clickable-block-fg);
      background: var(--ironsworn-color-clickable-block-bg);
      border-width: var(--ironsworn-border-width-md);
      border-style: solid;
      &:not(.tox-tbtn--disabled) {
        color: var(--ironsworn-color-clickable-block-fg);
        svg {
          fill: currentColor;
        }
      }
    }
    svg {
      fill: currentColor;
    }
    &:hover {
      color: var(--ironsworn-color-clickable-block-fg-hover);
      background: var(--ironsworn-color-clickable-block-bg-hover);
      border-color: var(--ironsworn-color-clickable-block-border-hover);
      border-width: var(--ironsworn-border-width-md);
      border-style: solid;
      svg {
        fill: currentColor;
      }
    }
    &[aria-pressed='true'] {
      color: var(--ironsworn-color-clickable-block-fg-selected);
      background: var(--ironsworn-color-clickable-block-bg-selected);
      svg {
        fill: currentColor;
      }
    }
  }
  .tox-tbtn--select {
    .inputFieldMixin();
    text-shadow: none;
  }
  .tox-collection--list {
    .tox-collection__item--active {
      background: var(--ironsworn-color-clickable-block-bg-hover);
    }
  }
}

// DROPDOWN MENU
//
// Menu
//
// Root variables
// from https://github.com/tinymce/tinymce/blob/develop/modules/oxide/src/less/theme/globals/global-variables.less
// Begin customization by changing these variables as most other variables are derivatives of these.
@background-color: var(--ironsworn-color-input-bg);
@base-value: 16px;
@color-black: #000;
@color-tint: #006ce7;
@color-white: var(--ironsworn-color-light);
@color-error: #c00;
@color-success: #78ab46;
@font-stack: var(--font-primary);

// Content;

@content-ui-darkmode: false; // Change this to true to get white icons in the content such as bookmarks.

// Colors
@border-color: transparent;
@text-color: var(--ironsworn-color-fg);
@text-color-muted: var(--ironsworn-color-fg-muted);

// Some useful generic variables

@menu-background-color: var(--ironsworn-color-midtone-10);
@menu-border-color: var(--ironsworn-color-input-border);
@menu-box-shadow: 0 0 2px 0 fade(@color-black, 20%),
  0 4px 8px 0 fade(@color-black, 15%);

.tox {
  .tox-menu {
    background: @menu-background-color;
    border: var(--ironsworn-border-width-md) solid @menu-border-color;
    box-shadow: @menu-box-shadow;
  }
}

// LIST
//
// Collection
// A list of items that can be arranged as vertical list, horizontal toolbar or a grid.
//

@collection-item-separator-color: var(--ironsworn-color-border-muted);

@collection-item-label-text-color: var(--ironsworn-color-fg);

@collection-item-label-disabled-text-color: var(--ironsworn-color-fg-50);

@toolbar-button-hover-background-color: var(
  --ironsworn-color-clickable-block-bg-hover
);

@collection-list-item-active-background-color: var(
  --ironsworn-color-clickable-block-bg-hover
);
@collection-list-item-label-active-text-color: var(
  --ironsworn-color-clickable-block-fg-hover
);
@collection-list-item-enabled-background-color: @menu-background-color;
@collection-list-item-label-enabled-text-color: var(
  --ironsworn-color-clickable-block-fg
);

@collection-toolbar-item-active-background-color: var(
  --ironsworn-color-clickable-block-bg-hover
);
@collection-toolbar-item-label-active-text-color: var(
  --ironsworn-color-clickable-block-fg-selected
);

@toolbar-button-enabled-background-color: var(
  --ironsworn-color-clickable-block-bg
);
@collection-toolbar-item-enabled-background-color: @toolbar-button-enabled-background-color;
@collection-toolbar-item-label-enabled-text-color: var(
  --ironsworn-color-clickable-block-fg
);

@collection-grid-item-active-background-color: var(
  --ironsworn-color-clickable-block-bg-hover
);
@collection-grid-item-label-active-text-color: var(
  --ironsworn-color-clickable-block-fg-hover
);
@collection-grid-item-enabled-background-color: @toolbar-button-enabled-background-color;
@collection-grid-item-label-enabled-text-color: var(
  --ironsworn-color-clickable-block-fg
);

@collection-group-label-background-color: var(--ironsworn-color-bg-20);
@collection-group-label-text-color: var(--ironsworn-color-fg-muted);

.tox {
  .tox-collection--list .tox-collection__group {
    border-bottom-width: 0;
    border-color: @collection-item-separator-color;
    border-left-width: 0;
    border-right-width: 0;
    border-style: solid;
    border-top-width: var(--ironsworn-border-width-md);

    &:first-child {
      border-top-width: 0;
    }
  }

  // Group headings should only be used on collection lists.
  .tox-collection__group-heading {
    background: @collection-group-label-background-color;
    color: @collection-group-label-text-color;
  }
  .tox-collection__item {
    color: @collection-item-label-text-color;
    transition: var(--std-animation);
  }

  // Note: Ensure "enabled" is before "active", as active styles should have a higher precedence
  .tox-collection--list .tox-collection__item--enabled {
    background: @collection-list-item-enabled-background-color;
    color: @collection-list-item-label-enabled-text-color;
  }

  .tox-collection--list .tox-collection__item--active {
    background: @collection-list-item-active-background-color;
  }

  .tox-collection--toolbar .tox-collection__item--enabled {
    background: @collection-toolbar-item-enabled-background-color;
    color: @collection-toolbar-item-label-enabled-text-color;
  }

  .tox-collection--toolbar .tox-collection__item--active {
    background: @collection-toolbar-item-active-background-color;
  }

  .tox-collection--grid .tox-collection__item--enabled {
    background: @collection-grid-item-enabled-background-color;
    color: @collection-grid-item-label-enabled-text-color;
  }

  .tox-collection--grid
    .tox-collection__item--active:not(.tox-collection__item--state-disabled) {
    background: @collection-grid-item-active-background-color;
    color: @collection-grid-item-label-active-text-color;
  }

  .tox-collection--list
    .tox-collection__item--active:not(.tox-collection__item--state-disabled) {
    color: @collection-list-item-label-active-text-color;
  }

  .tox-collection--toolbar
    .tox-collection__item--active:not(.tox-collection__item--state-disabled) {
    color: @collection-toolbar-item-label-active-text-color;
  }

  .tox-collection__item-icon,
  .tox-collection__item-checkmark {
    svg {
      fill: currentColor;
    }
  }

  .tox-collection__item-label {
    color: currentColor;
  }

  .tox-collection__item-accessory {
    color: @text-color-muted;
  }

  .tox-collection__item-caret {
    svg {
      fill: currentColor;
    }
  }

  // Disabled item
  .tox-collection__item--state-disabled {
    background: transparent !important;
    color: @collection-item-label-disabled-text-color;
    .tox-collection__item-caret svg {
      fill: currentColor;
    }
  }

  .tox-collection--horizontal {
    background: @menu-background-color;
    border: var(--ironsworn-border-width-md) solid
      @collection-item-separator-color;
  }
}

@toolbar-group-separator-color: var(--ironsworn-color-border-muted);

.tox:not([dir='rtl']) {
  .tox-collection--horizontal .tox-collection__group:not(:last-of-type) {
    border-right: var(--ironsworn-border-width-md) solid
      @toolbar-group-separator-color;
  }
}

// RTL
.tox[dir='rtl'] {
  .tox-collection--horizontal .tox-collection__group:not(:last-of-type) {
    border-left: var(--ironsworn-border-width-md) solid
      @toolbar-group-separator-color;
  }
}
